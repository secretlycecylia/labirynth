<script>

<!-- BACKGROUND AND CONTAINER -->
<div class="background">

<!-- DICE ROLLER -->
<div class="diceroller">
    <table>
        <tbody>
            <tr>
                <th colspan="2" class="sheet-bottom" data-i18n="dice-roller-u">DICE ROLLER</th>
            </tr>
            <tr>
                <td colspan="2" class="initiative">
                    <button type="roll" name="roll_initiative" data-i18n="roll-initiative" value="&{template:wod-initiative} {{name=@{character_name}}} {{dexterity=@{dexterity}}} {{composure=@{composure}}} {{fastReflexes=@{fast_reflexes}}} {{initiativePenalty=@{initiative_penalty}}} {{result=[[1d10 + @{dexterity} + @{composure} + @{fast_reflexes} + @{initiative_penalty} &{tracker}]]}}">Roll Initiative</button>
                </td>
            </tr>
            <tr class="rollstyle">
                <td rowspan="3" class="rollcontainer">
                    <button type="roll" name="roll_check" value="@{rollstyle}@{rolltype}"></button>
                </td>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rollstyle" value="@{roll_base}" title="Sheet Roll" checked="checked" />
                    <span class="sheet-attr" data-i18n="sheet-roll" >Sheet Roll</span>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rollstyle" value="@{rollattack}" />
                    <span class="sheet-attr" data-i18n="attack-roll" >Attack Roll</span>
                </td>
            </tr>
            <tr>
                <td class="bottom">
                    <input type="radio" class="sheet-attr" name="attr_rollstyle" value="@{rollsimple}" />
                    <span class="sheet-attr" data-i18n="simple-roll" >Simple Roll</span>
                </td>
            </tr>
            <tr>
                <td rowspan="7" class="rolldisplay">
                    <textarea type="text" name="attr_rolldisplay"></textarea>
                </td>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rolltype_select" value="Chance" />
                    <span class="sheet-attr" data-i18n="chance" >Chance</span>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rolltype_select" value="Normal" title="Normal" checked="checked" />
                    <span class="sheet-attr" data-i18n="normal" >Normal</span>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rolltype_select" value="9-Again" />
                    <span class="sheet-attr" data-i18n="9-again">9-Again</span>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rolltype_select" value="8-Again" />
                    <span class="sheet-attr" data-i18n="8-again">8-Again</span>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rolltype_select" value="Don't Reroll 10s" />
                    <span class="sheet-attr" data-i18n="dont-reroll" >Don't Reroll 10s</span>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rolltype_select" value="Chance Rote" />
                    <span class="sheet-attr" data-i18n="chance-rote" >Chance Rote</span>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="radio" class="sheet-attr" name="attr_rolltype_select" value="Rote" />
                    <span class="sheet-attr" data-i18n="rote" >Rote</span>
                </td>
            </tr>
        </tbody>
    </table>
</div>


<!-- HEADER -->
<img class="header mortal" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Chronicles%20of%20Darkness%20by%20Roll20/images/chroniclesofdarkness.png">

<!-- CHARACTER INFO FIELDS -->
<div class="3colrow">
    <table>
        <tbody>
            <tr>
                <td data-i18n="name">Name:</td>
                <td>
                    <input type="text" name="attr_character_name">
                </td>
                
                <td data-i18n="aura">Aura:</td>
                <tb>
                    <input type="text" name="attr_character_aura">
                </tb>
                 <td>
                    <span class="mortal" data-i18n="age" >Age:</span>
                     </td>
                     
                     <!-- ATTRIBUTE FIELDS -->
<div class="sheet-3colrow attributes">
    <table class="attributes">
        <tbody>
            <tr>
                <th colspan="10" data-i18n="attributes-u">ATTRIBUTES</th>
            </tr>
            <tr>
                <td class="category" data-i18n="power">Power</td>
                <td rowspan="3" class="spacer"></td>
                <td>
                    <input type="checkbox" class="sheet-attr" name="attr_Intelligence_flag" value="@{intelligence}" />
                    <span class="sheet-attr" data-i18n="intelligence" >Intelligence</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Intelligence" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Intelligence" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Intelligence" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Intelligence" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Intelligence" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Intelligence" value="5" /><span></span>
                </td>
                <td rowspan="3" class="spacer"></td>
                <td>
                    <input type="checkbox" class="sheet-attr" name="attr_Strength_flag" value="@{strength}" />
                    <span class="sheet-attr" data-i18n="strength" >Strength</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Strength" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Strength" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Strength" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Strength" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Strength" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Strength" value="5" /><span></span>
                </td>
                <td rowspan="3" class="spacer"></td>
                <td>
                    <input type="checkbox" class="sheet-attr" name="attr_Presence_flag" value="@{presence}" />
                    <span class="sheet-attr" data-i18n="presence" >Presence</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Presence" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Presence" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Presence" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Presence" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Presence" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Presence" value="5" /><span></span>
                </td>
            </tr>
            <tr>
                <td class="category" data-i18n="finesse">Finesse<td>
                    <input type="checkbox" class="sheet-attr" name="attr_Wits_flag" value="@{wits}" />
                    <span class="sheet-attr" data-i18n="wits" >Wits</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Wits" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Wits" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Wits" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Wits" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Wits" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Wits" value="5" /><span></span>
                </td>
                <td>
                    <input type="checkbox" class="sheet-attr" name="attr_Dexterity_flag" value="@{dexterity}" />
                    <span class="sheet-attr" data-i18n="dexterity" >Dexterity</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Dexterity" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Dexterity" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Dexterity" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Dexterity" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Dexterity" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Dexterity" value="5" /><span></span>
                </td>
                <td>
                    <input type="checkbox" class="sheet-attr" name="attr_Manipulation_flag" value="@{manipulation}" />
                    <span class="sheet-attr" data-i18n="manipulation" >Manipulation</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Manipulation" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Manipulation" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Manipulation" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Manipulation" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Manipulation" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Manipulation" value="5" /><span></span>
                </td>
            </tr>
            <tr>
                <td class="category" data-i18n="resistance">Resistance</td>
                <td>
                    <input type="checkbox" class="sheet-attr" name="attr_Resolve_flag" value="@{resolve}" />
                    <span class="sheet-attr" data-i18n="resolve" >Resolve</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Resolve" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Resolve" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Resolve" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Resolve" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Resolve" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Resolve" value="5" /><span></span>
                </td>
                <td>
                    <input type="checkbox" class="sheet-attr" name="attr_Stamina_flag" value="@{stamina}" />
                    <span class="sheet-attr" data-i18n="stamina" >Stamina</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Stamina" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Stamina" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Stamina" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Stamina" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Stamina" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Stamina" value="5" /><span></span>
                </td>
                <td>
                    <input type="checkbox" class="sheet-attr" name="attr_Composure_flag" value="@{composure}" />
                    <span class="sheet-attr" data-i18n="composure" >Composure</span>
                </td>
                <td>
                    <input type="radio" class="sheet-normal sheet-zero" name="attr_Composure" value="0" /><span></span><input type="radio" class="sheet-normal" name="attr_Composure" value="1" checked="checked" /><span></span><input type="radio" class="sheet-normal" name="attr_Composure" value="2" /><span></span><input type="radio" class="sheet-normal" name="attr_Composure" value="3" /><span></span><input type="radio" class="sheet-normal" name="attr_Composure" value="4" /><span></span><input type="radio" class="sheet-normal" name="attr_Composure" value="5" /><span></span>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div class="el_spacer"></div>

td data-i18n="weapon-attack" >Weapon/Attack</td><td data-i18n="type" >Type</td><td data-i18n="damage-short" >Dmg</td><td data-i18n="range" >Range</td><td data-i18n="magnitude-short" >Mag</td><td data-i18n="initiative-short" >Ini</td><td data-i18n="strength-short" >Str</td><td data-i18n="size-short">Sz</td>
                                    </tr>
                                    <tr>
                                        <td><input type="radio" class="sheet-weapon" name="attr_attack" value="{{attack_name=@{attack_name0}}} {{weapon_damage=@{attack_damage0}}} {{range=@{attack_range0}}} @{attack_type0}" checked="checked" /><span></span>
                                            <input type="text" name="attr_attack_name0" class="weaponstat name" disabled="disabled" value="@{unarmedmacro}" /></td>
                                        <td class="selectcontainer">
                                            <select name="attr_attack_type0">
                                                <option value="{{str=1}} {{bra=1}} {{result=[[{((@{strength}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" checked="checked" data-i18n="brawl" >Brawl</option>
                                                <option class="1st" value="{{1st=1}} {{str=1}} {{wea=1}} {{result=[[{((@{attack_damage0}+@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{attack_damage0}+@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{attack_damage0}+@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{attack_damage0}+@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{attack_damage0}+@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{str=1}} {{wea=1}} {{result=[[{((@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                            </select>
                                        </td>
                                        <td><input type="text" name="attr_attack_damage0" class="weaponstat" value="0" /></td>
                                        <td><input type="text" name="attr_attack_range0" class="weaponstat range" disabled="disabled" value="-" /></td>
                                        <td><input type="text" name="attr_attack_magazine0" class="weaponstat mag" disabled="disabled" value="-" /></td>
                                        <td><input type="text" name="attr_attack_initiative0" class="weaponstat" disabled="disabled" value="0" /></td>
                                        <td><input type="text" name="attr_attack_strength0" class="weaponstat" disabled="disabled" value="0" /></td>
                                        <td><input type="text" name="attr_attack_size0" class="weaponstat" disabled="disabled" value="-" /></td>
                                    </tr>
                                    <tr>
                                        <td><input type="radio" class="sheet-weapon" name="attr_attack" value="{{attack_name=@{attack_name1}}} {{weapon_damage=@{attack_damage1}}} {{range=@{attack_range1}}} @{attack_type1}" /><span></span>
                                            <input type="text" name="attr_attack_name1" class="weaponstat name" /></td>
                                        <td class="selectcontainer">
                                            <select name="attr_attack_type1">
                                                <option value="{{result=[[{((?{@{modifiermacro}|0})" checked="checked"></option>
                                                <option value="{{str=1}} {{bra=1}} {{result=[[{((@{strength}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl" >Brawl</option>
                                                <option class="1st" value="{{1st=1}} {{str=1}} {{wea=1}} {{result=[[{((@{attack_damage1}+@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{str=1}} {{wea=1}} {{result=[[{((@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                            </select>
                                        </td>
                                        <td><input type="text" name="attr_attack_damage1" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_range1" class="weaponstat range" /></td>
                                        <td><input type="text" name="attr_attack_magazine1" class="weaponstat mag" /></td>
                                        <td><input type="text" name="attr_attack_initiative1" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_strength1" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_size1" class="weaponstat" /></td>
                                    </tr>
                                    <tr>
                                        <td><input type="radio" class="sheet-weapon" name="attr_attack" value="{{attack_name=@{attack_name2}}} {{weapon_damage=@{attack_damage2}}} {{range=@{attack_range2}}} @{attack_type2}" /><span></span>
                                            <input type="text" name="attr_attack_name2" class="weaponstat name" /></td>
                                        <td class="selectcontainer">
                                            <select name="attr_attack_type2">
                                                <option value="{{result=[[{((?{@{modifiermacro}|0})" checked="checked"></option>
                                                <option value="{{str=1}} {{bra=1}} {{result=[[{((@{strength}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl" >Brawl</option>
                                                <option class="1st" value="{{1st=1}} {{str=1}} {{wea=1}} {{result=[[{((@{attack_damage2}+@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{attack_damage2}+@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{attack_damage2}+@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{attack_damage2}+@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{attack_damage2}+@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{str=1}} {{wea=1}} {{result=[[{((@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                            </select>
                                        </td>
                                        <td><input type="text" name="attr_attack_damage2" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_range2" class="weaponstat range" /></td>
                                        <td><input type="text" name="attr_attack_magazine2" class="weaponstat mag" /></td>
                                        <td><input type="text" name="attr_attack_initiative2" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_strength2" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_size2" class="weaponstat" /></td>
                                    </tr>
                                    <tr>
                                        <td><input type="radio" class="sheet-weapon" name="attr_attack" value="{{attack_name=@{attack_name3}}} {{weapon_damage=@{attack_damage3}}} {{range=@{attack_range3}}} @{attack_type3}" /><span></span>
                                            <input type="text" name="attr_attack_name3" class="weaponstat name" /></td>
                                        <td class="selectcontainer">
                                            <select name="attr_attack_type3">
                                                <option value="{{result=[[{((?{@{modifiermacro}|0})" checked="checked"></option>
                                                <option value="{{str=1}} {{bra=1}} {{result=[[{((@{strength}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl" >Brawl</option>
                                                <option class="1st" value="{{1st=1}} {{str=1}} {{wea=1}} {{result=[[{((@{attack_damage3}+@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{attack_damage3}+@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{attack_damage3}+@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{attack_damage3}+@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{attack_damage3}+@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{str=1}} {{wea=1}} {{result=[[{((@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                            </select>
                                        </td>
                                        <td><input type="text" name="attr_attack_damage3" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_range3" class="weaponstat range" /></td>
                                        <td><input type="text" name="attr_attack_magazine3" class="weaponstat mag" /></td>
                                        <td><input type="text" name="attr_attack_initiative3" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_strength3" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_size3" class="weaponstat" /></td>
                                    </tr>
                                    <tr>
                                        <td><input type="radio" class="sheet-weapon" name="attr_attack" value="{{attack_name=@{attack_name4}}} {{weapon_damage=@{attack_damage4}}} {{range=@{attack_range4}}} @{attack_type4}" /><span></span>
                                            <input type="text" name="attr_attack_name4" class="weaponstat name" /></td>
                                        <td class="selectcontainer">
                                            <select name="attr_attack_type4">
                                                <option value="{{result=[[{((?{@{modifiermacro}|0})" checked="checked"></option>
                                                <option value="{{str=1}} {{bra=1}} {{result=[[{((@{strength}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl" >Brawl</option>
                                                <option class="1st" value="{{1st=1}} {{str=1}} {{wea=1}} {{result=[[{((@{attack_damage4}+@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{attack_damage4}+@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{attack_damage4}+@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{attack_damage4}+@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="1st" value="{{1st=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{attack_damage4}+@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{str=1}} {{wea=1}} {{result=[[{((@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee" >Melee</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="gun" >Gun</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="thrown" >Thrown</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="brawl-fight-finesse" >Brawl* (Fighting Finesse)</option>
                                                <option class="2nd" value="{{2nd=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})" data-i18n="melee-fight-finesse" >Melee* (Fighting Finesse)</option>
                                            </select>
                                        </td>
                                        <td><input type="text" name="attr_attack_damage4" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_range4" class="weaponstat range" /></td>
                                        <td><input type="text" name="attr_attack_magazine4" class="weaponstat mag" /></td>
                                        <td><input type="text" name="attr_attack_initiative4" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_strength4" class="weaponstat" /></td>
                                        <td><input type="text" name="attr_attack_size4" class="weaponstat" /></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        
                         <tr>
                            <td class="subheader" data-i18n="health">Health</td>
                        </tr>
                        <tr>
                            <td class="variablecontainer">
                                <input type="radio" class="sheet-normal" name="attr_health" value="1" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_1" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_1" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_1" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_1" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_1">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="2" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_2" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_2" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_2" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_2" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_2">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="3" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_3" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_3" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_3" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_3" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_3">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="4" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_4" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_4" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_4" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_4" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_4">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="5" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_5" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_5" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_5" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_5" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_5">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="6" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_6" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_6" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_6" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_6" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_6">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="7" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_7" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_7" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_7" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_7" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_7">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="8" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_8" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_8" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_8" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_8" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_8">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="9" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_9" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_9" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_9" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_9" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_9">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="10" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_10" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_10" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_10" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_10" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_10">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="11" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_11" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_11" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_11" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_11" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_11">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="12" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_12" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_12" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_12" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_12" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_12">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="13" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_13" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_13" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_13" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_13" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_13">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="14" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_14" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_14" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_14" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_14" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_14">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="15" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_15" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_15" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_15" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_15" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_15">-1-2-3</span></span><input type="radio" class="sheet-normal" name="attr_health" value="16" /><span></span><span class="healthboxcontainer"><input type="radio" class="sheet-whitedot" name="attr_healthbox_16" value="0" checked="checked" /><span class="sheet-whitedot"></span><input type="radio" class="sheet-bashingdot" name="attr_healthbox_16" value="1" /><span class="sheet-bashingdot"></span><input type="radio" class="sheet-lethaldot" name="attr_healthbox_16" value="2" /><span class="sheet-lethaldot"></span><input type="radio" class="sheet-aggravateddot" name="attr_healthbox_16" value="3" /><span class="sheet-aggravateddot"></span></span><span class="woundpenalties"><span name="attr_woundpenalties_16">-1-2-3</span></span>
                                
                                 <tr>
                            <td class="spacer"></td>
                        </tr>
                        <tr>
                            <td class="subheader" data-i18n="willpower">Willpower</td>
                        </tr>
                        <tr>
                            <td class="variablecontainer">
                                <input type="hidden" name="attr_willpower_flag">
                                <input type="radio" class="sheet-normal" name="attr_willpower" value="1" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box1"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="2" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box2"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="3" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box3"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="4" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box4"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="5" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box5"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="6" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box6"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="7" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box7"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="8" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box8"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="9" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box9"><span></span></span><input type="radio" class="sheet-normal" name="attr_willpower" value="10" /><span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_willpower_box10"><span></span></span>
                            </td>
                        </tr>
                        
                         <tr>
                            <td>
                                <table class="mortal">
                                    <tr>
                                        <td class="subheader" data-i18n="conditions">Conditions</td>
                                    </tr>
                                    <tr>
                                        <td class="rowtext"><input type="text" name="attr_conditions1" /></td>
                                    </tr>
                                    <tr>
                                        <td class="rowtext"><input type="text" name="attr_conditions2" /></td>
                                    </tr>
                                    <tr>
                                        <td class="rowtext"><input type="text" name="attr_conditions3" /></td>
                                    </tr>
                                    <tr>
                                        <td class="rowtext"><input type="text" name="attr_conditions4" /></td>
                                    </tr>
                                    <tr>
                                        <td class="el_spacer"></td>
                                    </tr>
                                </table>
                                
                                <tr>
                            <td><span data-i18n="experience">Experience</span>:<input type="text" name="attr_experience" style="width: 90px;"></td>
                        </tr>
                        <tr>
                            <td><span class="2nd"><span data-i18n="beats">Beats</span>: <span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_beat_box1"><span></span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_beat_box2"><span></span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_beat_box3"><span></span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_beat_box4"><span></span></span><span class="healthboxcontainer"><input type="checkbox" class="sheet-normal" name="attr_beat_box5"><span></span></span></span></td>
                        </tr>
                        
                        <!-- PAGE 2 -->
<div class="expandedsheet">

    <div class="leftcolumn" style="width: 447px;">

        <fieldset class="repeating_custom1">
            <div class="sheet-customroll">
                <span data-i18n="roll-d">Roll:</span>
                <input type="text" class="name" name="attr_customRollName1">
                <span  data-i18n="action-d">Action: </span>
                    <select name="attr_customRollAction1">
                        <option value="Reflexive" data-i18n="reflexive" >Reflexive</option>
                        <option value="Instant" selected="selected" data-i18n="instant" >Instant</option>
                        <option value="Extended" data-i18n="extended" >Extended</option>
                        <option value="Contested" data-i18n="contested" >Contested</option>
                    </select>
                <div class="rollcontainer">
                    <button type='roll' class="sheet-roll" name='roll_customRoll1' value="&{template:wod-3part} {{name=@{character_name}}} {{roll_name=@{customRollName1}}} {{mod=[[?{@{modifiermacro}|0}]]}} {{part1=@{part1name_1}}} {{part2=@{part2name_1}}} {{part3=@{part3name_1}}} {{part1pool=@{part1pool_1}}} {{part2pool=@{part2pool_1}}} {{part3pool=@{part3pool_1}}} {{result=[[{((?{@{modifiermacro}|0}+(@{part1pool_1}+0)+(@{part2pool_1}+0)+(@{part3pool_1}+0))@{rolltype}" ></button>
                </div>
                <br>
                <span data-i18n="source-d">Source: </span>
                <input type="text" class="name" name="attr_source1">
                p <input type="text" class="partpool" name="attr_pnum1" style="width: 40px;">
                <br>
                <input type="text" class="partname" name="attr_part1name_1" /><input type="text" class="partpool" name="attr_part1pool_1" /><span>+</span><input type="text" class="partname" name="attr_part2name_1" /><input type="text" class="partpool" name="attr_part2pool_1" /><span>+</span><input type="text" class="partname" name="attr_part3name_1" /><input type="text" class="partpool" name="attr_part3pool_1" />
                <br>
                <textarea rows="2" cols="40" name="attr_part1text_1"></textarea>
            </div>
        </fieldset>

    </div>
    <div class="rightcolumn" style="width: 447px;">

        <fieldset class="repeating_custom2">
            <div class="sheet-customroll">
              <span  data-i18n="roll-d">Roll:</span>
                <input type="text" class="name" name="attr_customRollName2">
                <span  data-i18n="action-d">Action: </span>
                   <select name="attr_customRollAction2">
                        <option value="Reflexive" data-i18n="reflexive" >Reflexive</option>
                        <option value="Instant" selected="selected" data-i18n="instant" >Instant</option>
                        <option value="Extended" data-i18n="extended" >Extended</option>
                        <option value="Contested" data-i18n="contested" >Contested</option>
                    </select>
                <div class="rollcontainer">
                    <button type='roll' class="sheet-roll" name='roll_customRoll2' value="&{template:wod-3part} {{name=@{character_name}}} {{roll_name=@{customRollName2}}} {{mod=[[?{@{modifiermacro}|0}]]}} {{part1=@{part1name_2}}} {{part2=@{part2name_2}}} {{part3=@{part3name_2}}} {{part1pool=@{part1pool_2}}} {{part2pool=@{part2pool_2}}} {{part3pool=@{part3pool_2}}} {{result=[[{((?{@{modifiermacro}|0}+(@{part1pool_2}+0)+(@{part2pool_2}+0)+(@{part3pool_2}+0))@{rolltype}" ></button>
                </div>
                <br>
                <span  data-i18n="source-d">Source: </span>
                <input type="text" class="name" name="attr_source2">
                p <input type="text" class="partpool" name="attr_pnum2">
                <br>
                <input type="text" class="partname" name="attr_part1name_2" /><input type="text" class="partpool" name="attr_part1pool_2" /><span>+</span><input type="text" class="partname" name="attr_part2name_2" /><input type="text" class="partpool" name="attr_part2pool_2" /><span>+</span><input type="text" class="partname" name="attr_part3name_2" /><input type="text" class="partpool" name="attr_part3pool_2" />
                <br>
                <textarea rows="2" cols="40" name="attr_part1text_2"></textarea>
            </div>
        </fieldset>

    </div>
</div>
<!-- HIDDEN FIELDS AND FORMULAS -->
<input type="hidden" name="attr_0" value="0" />
<input type="hidden" name="attr_rollsimple" value="&{template:wod-simple} {{name=@{character_name}}} {{option=?{@{dicepoolmacro}|0}}} {{result=[[{(?{@{dicepoolmacro}|1}" />
<input type="hidden" name="attr_roll3part" value="" />
<input type="hidden" name="attr_rollsheet" value="&{template:wod} {{name=@{character_name}}} {{mod=?{@{modifiermacro}|0}}} {{strength=@{strength}}} {{dexterity=@{dexterity}}} {{stamina=@{stamina}}} {{intelligence=@{intelligence}}} {{wits=@{wits}}} {{resolve=@{resolve}}} {{presence=@{presence}}} {{manipulation=@{manipulation}}} {{composure=@{composure}}} {{Academics=@{Academics}}} {{Computer=@{Computer}}} {{Crafts=@{Crafts}}} {{Investigation=@{Investigation}}} {{Medicine=@{Medicine}}} {{Occult=@{Occult}}} {{Politics=@{Politics}}} {{Science=@{Science}}} {{Athletics=@{Athletics}}} {{Brawl=@{Brawl}}} {{Drive=@{Drive}}} {{Firearms=@{Firearms}}} {{Larceny=@{Larceny}}} {{Stealth=@{Stealth}}} {{Survival=@{Survival}}} {{Weaponry=@{Weaponry}}} {{AnimalKen=@{AnimalKen}}} {{Empathy=@{Empathy}}} {{Expression=@{Expression}}} {{Intimidation=@{Intimidation}}} {{Persuasion=@{Persuasion}}} {{Socialize=@{Socialize}}} {{Streetwise=@{Streetwise}}} {{Subterfuge=@{Subterfuge}}} {{Animalism=@{Animalism}}} {{Auspex=@{Auspex}}} {{Celerity=@{Celerity}}} {{Dominate=@{Dominate}}} {{Majesty=@{Majesty}}} {{Nightmare=@{Nightmare}}} {{Obfuscate=@{Obfuscate}}} {{Protean=@{Protean}}} {{Resilience=@{Resilience}}} {{Vigor=@{Vigor}}} {{Crac=@{Crac}}} {{ThebanSorcery=@{ThebanSorcery}}} {{Death=@{Death}}} {{Fate=@{Fate}}} {{Forces=@{Forces}}} {{Life=@{Life}}} {{Matter=@{Matter}}} {{Mind=@{Mind}}} {{Prime=@{Prime}}} {{Spirit=@{Spirit}}} {{Space=@{Space}}} {{Time=@{Time}}} {{potency=@{potency}}} {{@{strength_flag}str=1}} {{@{dexterity_flag}dex=1}} {{@{stamina_flag}sta=1}} {{@{intelligence_flag}int=1}} {{@{wits_flag}wit=1}} {{@{resolve_flag}res=1}} {{@{presence_flag}pre=1}} {{@{manipulation_flag}man=1}} {{@{composure_flag}com=1}} {{@{Academics_flag}aca=1}} {{@{Computer_flag}comp=1}} {{@{Crafts_flag}cra=1}} {{@{Investigation_flag}inv=1}} {{@{Medicine_flag}med=1}} {{@{Occult_flag}occ=1}} {{@{Politics_flag}pol=1}} {{@{Science_flag}sci=1}} {{@{Athletics_flag}ath=1}} {{@{Brawl_flag}bra=1}} {{@{Drive_flag}dri=1}} {{@{Firearms_flag}fir=1}} {{@{Larceny_flag}lar=1}} {{@{Stealth_flag}ste=1}} {{@{Survival_flag}sur=1}} {{@{Weaponry_flag}wea=1}} {{@{AnimalKen_flag}ani=1}} {{@{Empathy_flag}emp=1}} {{@{Expression_flag}exp=1}} {{@{Intimidation_flag}inti=1}} {{@{Persuasion_flag}per=1}} {{@{Socialize_flag}soc=1}} {{@{Streetwise_flag}stre=1}} {{@{Subterfuge_flag}sub=1}} {{@{Animalism_flag}anim=1}} {{@{Auspex_flag}ausp=1}} {{@{Celerity_flag}cele=1}} {{@{Dominate_flag}domi=1}} {{@{Majesty_flag}maje=1}} {{@{Nightmare_flag}nigh=1}} {{@{Obfuscate_flag}obfu=1}} {{@{Protean_flag}prot=1}} {{@{Resilience_flag}resi=1}} {{@{Vigor_flag}vigo=1}} {{@{Crac_flag}cra=1}} {{@{ThebanSorcery_flag}theb=1}} {{@{Death_flag}deat=1}} {{@{Fate_flag}fate=1}} {{@{Forces_flag}forc=1}} {{@{Life_flag}life=1}} {{@{Matter_flag}matt=1}} {{@{Mind_flag}mind=1}} {{@{Prime_flag}prim=1}} {{@{Spirit_flag}spir=1}} {{@{Space_flag}spac=1}} {{@{Time_flag}time=1}} {{@{potency_flag}pote=1}} {{result=[[{(([[?{@{modifiermacro}|0}+@{strength_flag}+@{dexterity_flag}+@{stamina_flag}+@{intelligence_flag}+@{wits_flag}+@{resolve_flag}+@{presence_flag}+@{manipulation_flag}+@{composure_flag}+@{Academics_flag}+@{Computer_flag}+@{Crafts_flag}+@{Investigation_flag}+@{Medicine_flag}+@{Occult_flag}+@{Politics_flag}+@{Science_flag}+@{Athletics_flag}+@{Brawl_flag}+@{Drive_flag}+@{Firearms_flag}+@{Larceny_flag}+@{Stealth_flag}+@{Survival_flag}+@{Weaponry_flag}+@{AnimalKen_flag}+@{Empathy_flag}+@{Expression_flag}+@{Intimidation_flag}+@{Persuasion_flag}+@{Socialize_flag}+@{Streetwise_flag}+@{Subterfuge_flag}+@{Animalism_flag}+@{Auspex_flag}+@{Celerity_flag}+@{Dominate_flag}+@{Majesty_flag}+@{Nightmare_flag}+@{Obfuscate_flag}+@{Protean_flag}+@{Resilience_flag}+@{Vigor_flag}+@{Crac_flag}+@{ThebanSorcery_flag}+@{Death_flag}+@{Fate_flag}+@{Forces_flag}+@{Life_flag}+@{Matter_flag}+@{Mind_flag}+@{Prime_flag}+@{Spirit_flag}+@{Space_flag}+@{Time_flag}+@{potency_flag}]])" />
<input type="hidden" name="attr_rollattack" value="&{template:wod-attack} {{name=@{character_name}}} {{strength=@{strength}}} {{dexterity=@{dexterity}}} {{brawl=@{brawl}}} {{weaponry=@{weaponry}}} {{firearms=@{firearms}}} {{athletics=@{athletics}}} {{mod=[[?{@{modifiermacro}|0}]]}} {{woundpenalty=[[@{wound_penalty}]]}} {{wpen=[[@{weapon_penalty}]]}} {{apen=[[@{armor_penalty}]]}} @{attack}" />

<input type="hidden" name="attr_balistic_armor" value="((@{armor_ballistic0}+0)*@{armor_flag0})+((@{armor_ballistic1}+0)*@{armor_flag1})+((@{armor_ballistic2}+0)*@{armor_flag2})" />
<input type="hidden" name="attr_general_armor" value="((@{armor_general0}+0)*@{armor_flag0})+((@{armor_general1}+0)*@{armor_flag1})+((@{armor_general2}+0)*@{armor_flag2})" />
<input type="hidden" name="attr_defense_penalty" value="((@{armor_defense0}+0)*@{armor_flag0})+((@{armor_defense1}+0)*@{armor_flag1})+((@{armor_defense2}+0)*@{armor_flag2})" />
<input type="hidden" name="attr_speed_penalty" value="((@{armor_speed0}+0)*@{armor_flag0})+((@{armor_speed1}+0)*@{armor_flag1})+((@{armor_speed2}+0)*@{armor_flag2})" />
<!-- <input type="hidden" name="attr_initiative_penalty" value="((@{attack_initiative0}+0)*@{attack_flag0})+((@{attack_initiative1}+0)*@{attack_flag1})+((@{attack_initiative2}+0)*@{attack_flag2})+((@{attack_initiative3}+0)*@{attack_flag3})+((@{attack_initiative4}+0)*@{attack_flag4})" /> -->
<input type="hidden" name="attr_initiative_penalty" value="0" />
<input type="hidden" name="attr_weapon_penalty" value="0" />
<input type="hidden" name="attr_armor_penalty" value="0" />
<input type="hidden" name="attr_wound_penalty" value="0" />
<input type="hidden" name="attr_attack_pool" value="((@{attack_type0}+0)*@{attack_flag0})+((@{attack_type1}+0)*@{attack_flag1})+((@{attack_type2}+0)*@{attack_flag2})+((@{attack_type3}+0)*@{attack_flag3})+((@{attack_type4}+0)*@{attack_flag4})" />
<input type="hidden" name="attr_attack_base_damage" value="((@{attack_damage0}+0)*@{attack_flag0})+((@{attack_damage1}+0)*@{attack_flag1})+((@{attack_damage2}+0)*@{attack_flag2})+((@{attack_damage3}+0)*@{attack_flag3})+((@{attack_damage4}+0)*@{attack_flag4})" />
<input type="hidden" name="attr_roll_array" />
<input type="hidden" name="attr_roll_base" />
<input type="hidden" name="attr_defense_base" />
<input type="hidden" name="attr_potency_name" />
<input type="hidden" name="attr_rolltype" value=")d10!cs>10}>8]]}}" />
<!-- Translation handles for sheetworkers -->
<span style="display: none" data-i18n="dice-pool">Dice Pool</span>
<span style="display: none" data-i18n="modifiers">Modifiers</span>
<span style="display: none" data-i18n="unarmed">Unarmed</span>

</div>

<div class="rolltemplates">
<!-- ROLL TEMPLATES -->
<rolltemplate class="sheet-rolltemplate-wod">
    <table>
        <tr><th>{{name}} <span data-i18n="rolls">rolls</span>{{#roll_name}} {{roll_name}}{{/roll_name}}</th></tr>
        <tr><td class="attr">
            {{^0str}}
                <span data-i18n="strength">Strength</span>({{strength}})<br>
            {{/0str}}
            {{^0dex}}
                <span data-i18n="dexterity">Dexterity</span>({{dexterity}})<br>
            {{/0dex}}
            {{^0sta}}
                <span data-i18n="stamina">Stamina</span>({{stamina}})<br>
            {{/0sta}}
            {{^0int}}
                <span data-i18n="intelligence">Intelligence</span>({{intelligence}})<br>
            {{/0int}}
            {{^0wit}}
                <span data-i18n="wits">Wits</span>({{wits}})<br>
            {{/0wit}}
            {{^0res}}
                <span data-i18n="resolve">Resolve</span>({{resolve}})<br>
            {{/0res}}
            {{^0pre}}
                <span data-i18n="presence">Presence</span>({{presence}})<br>
            {{/0pre}}
            {{^0man}}
                <span data-i18n="manipulation">Manipulation</span>({{manipulation}})<br>
            {{/0man}}
            {{^0com}}
                <span data-i18n="composure">Composure</span>({{composure}})<br>
            {{/0com}}
            {{^0aca}}
                <span data-i18n="academics">Academics</span>({{Academics}})<br>
            {{/0aca}}
            {{^0comp}}
                <span data-i18n="computer">Computer</span>({{Computer}})<br>
            {{/0comp}}
            {{^0cra}}
                <span data-i18n="crafts">Crafts</span>({{Crafts}})<br>
            {{/0cra}}
            {{^0inv}}
                <span data-i18n="investigation">Investigation</span>({{Investigation}})<br>
            {{/0inv}}
            {{^0med}}
                <span data-i18n="medicine">Medicine</span>({{Medicine}})<br>
            {{/0med}}
            {{^0occ}}
                <span data-i18n="occult">Occult</span>({{Occult}})<br>
            {{/0occ}}
            {{^0pol}}
                <span data-i18n="politics">Politics</span>({{Politics}})<br>
            {{/0pol}}
            {{^0sci}}
                <span data-i18n="science">Science</span>({{Science}})<br>
            {{/0sci}}
            {{^0ath}}
                <span data-i18n="athletics">Athletics</span>({{Athletics}})<br>
            {{/0ath}}
            {{^0bra}}
                <span data-i18n="brawl">Brawl</span>({{Brawl}})<br>
            {{/0bra}}
            {{^0dri}}
                <span data-i18n="drive">Drive</span>({{Drive}})<br>
            {{/0dri}}
            {{^0fir}}
                <span data-i18n="firearms">Firearms</span>({{Firearms}})<br>
            {{/0fir}}
            {{^0lar}}
                <span data-i18n="larceny">Larceny</span>({{Larceny}})<br>
            {{/0lar}}
            {{^0ste}}
                <span data-i18n="stealth">Stealth</span>({{Stealth}})<br>
            {{/0ste}}
            {{^0sur}}
                <span data-i18n="survival">Survival</span>({{Survival}})<br>
            {{/0sur}}
            {{^0wea}}
                <span data-i18n="weaponry">Weaponry</span>({{Weaponry}})<br>
            {{/0wea}}
            {{^0ani}}
                <span data-i18n="animalken">Animal Ken</span>({{AnimalKen}})<br>
            {{/0ani}}
            {{^0emp}}
                <span data-i18n="empathy">Empathy</span>({{Empathy}})<br>
            {{/0emp}}
            {{^0exp}}
                <span data-i18n="expression">Expression</span>({{Expression}})<br>
            {{/0exp}}
            {{^0inti}}
                <span data-i18n="intimidation">Intimidation</span>({{Intimidation}})<br>
            {{/0inti}}
            {{^0per}}
                <span data-i18n="persuasion">Persuasion</span>({{Persuasion}})<br>
            {{/0per}}
            {{^0soc}}
                <span data-i18n="socialize">Socialize</span>({{Socialize}})<br>
            {{/0soc}}
            {{^0stre}}
                <span data-i18n="streetwise">Streetwise</span>({{Streetwise}})<br>
            {{/0stre}}
            {{^0sub}}
                <span data-i18n="subterfuge">Subterfuge</span>({{Subterfuge}})<br>
            {{/0sub}}
            {{^0anim}}
                <span data-i18n="animalism">Animalism</span>({{Animalism}})<br>
            {{/0anim}}
            {{^0ausp}}
                <span data-i18n="auspex">Auspex</span>({{Auspex}})<br>
            {{/0ausp}}
            {{^0cele}}
                <span data-i18n="celerity">Celerity</span>({{Celerity}})<br>
            {{/0cele}}
            {{^0domi}}
                <span data-i18n="dominate">Dominate</span>({{Dominate}})<br>
            {{/0domi}}
            {{^0maje}}
                <span data-i18n="majesty">Majesty</span>({{Majesty}})<br>
            {{/0maje}}
            {{^0nigh}}
                <span data-i18n="nightmare">Nightmare</span>({{Nightmare}})<br>
            {{/0nigh}}
            {{^0obfu}}
                <span data-i18n="obfuscate">Obfuscate</span>({{Obfuscate}})<br>
            {{/0obfu}}
            {{^0prot}}
                <span data-i18n="protean">Protean</span>({{Protean}})<br>
            {{/0prot}}
            {{^0resi}}
                <span data-i18n="resilience">Resilience</span>({{Resilience}})<br>
            {{/0resi}}
            {{^0vigo}}
                <span data-i18n="vigor">Vigor</span>({{Vigor}})<br>
            {{/0vigo}}
            {{^0cra}}
                <span data-i18n="crac">Crac</span>({{Crac}})<br>
            {{/0cra}}
            {{^0theb}}
                <span data-i18n="thebansorcery">Theban Sorcery</span>({{ThebanSorcery}})<br>
            {{/0theb}}
            {{^0deat}}
                <span data-i18n="death">Death</span>({{Death}})<br>
            {{/0deat}}
            {{^0fate}}
                <span data-i18n="fate">Fate</span>({{Fate}})<br>
            {{/0fate}}
            {{^0forc}}
                <span data-i18n="forces">Forces</span>({{Forces}})<br>
            {{/0forc}}
            {{^0life}}
                <span data-i18n="life">Life</span>({{Life}})<br>
            {{/0life}}
            {{^0matt}}
                <span data-i18n="matter">Matter</span>({{Matter}})<br>
            {{/0matt}}
            {{^0mind}}
                <span data-i18n="mind">Mind</span>({{Mind}})<br>
            {{/0mind}}
            {{^0prim}}
                <span data-i18n="prime">Prime</span>({{Prime}})<br>
            {{/0prim}}
            {{^0spir}}
                <span data-i18n="spirit">Spirit</span>({{Spirit}})<br>
            {{/0spir}}
            {{^0spac}}
                <span data-i18n="space">Space</span>({{Space}})<br>
            {{/0spac}}
            {{^0time}}
                <span data-i18n="time">Time</span>({{Time}})<br>
            {{/0time}}
            {{^0pote}}
                <span data-i18n="power-stat">Power Stat</span>({{potency}})<br>
            {{/0pote}}
                <span data-i18n="modifiers">Modifiers</span>({{mod}})
        </td></tr>
        <tr>
            <td class="result">{{result}} <span data-i18n="successes">Successes</span></td>
        </tr>
        <tr>
            <td class="specialrollflag">
                {{#chance}}
                    0C
                {{/chance}}
                {{#9again}}
                    9A
                {{/9again}}
                {{#8again}}
                    8A
                {{/8again}}
            </td>
        </tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-wod-simple">
    <table>
        <tr><th>{{name}} <span data-i18n="rolls">rolls</span></th></tr>
        <tr><td class="attr">
            {{option}} <span data-i18n="dice-for">dice for</span><br>
        </td></tr>
        <tr>
            <td class="result">{{result}} <span data-i18n="successes">Successes</span></td>
        </tr>
        <tr>
            <td class="specialrollflag">
                {{#chance}}
                    0C
                {{/chance}}
                {{#9again}}
                    9A
                {{/9again}}
                {{#8again}}
                    8A
                {{/8again}}
            </td>
        </tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-wod-3part">
    <table>
        <tr><th>{{name}} <span data-i18n="rolls">rolls</span>{{#roll_name}} {{roll_name}}{{/roll_name}}</th></tr>
        <tr><td class="attr">
            {{#part1}}
                {{part1}}({{part1pool}})<br>
            {{/part1}}
            {{#part2}}
                {{part2}}({{part2pool}})<br>
            {{/part2}}
            {{#part3}}
                {{part3}}({{part3pool}})<br>
            {{/part3}}
            {{#^rollTotal() woundpenalty 0}}
                <span data-i18n="wound">Wound</span> <span data-i18n="penalty">Penalty</span>({{woundpenalty}})
            {{/^rollTotal() woundpenalty 0}}
            {{#^rollTotal() mod 0}}
                <span data-i18n="modifiers">Modifiers</span>({{mod}})
            {{/^rollTotal() mod 0}}
        </td></tr>
        <tr>
            <td class="result">{{result}} <span data-i18n="successes">Successes</span></td>
        </tr>
        <tr>
            <td class="specialrollflag">
                {{#chance}}
                    0C
                {{/chance}}
                {{#9again}}
                    9A
                {{/9again}}
                {{#8again}}
                    8A
                {{/8again}}
            </td>
        </tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-wod-initiative">
    <table>
        <tr><th>{{name}} <span data-i18n="rolls">rolls</span> <span data-i18n="initiative">Initiative</span></th></tr>
        <tr><td class="attr">
            {{#dexterity}}
                <span data-i18n="dexterity">Dexterity</span>({{dexterity}})<br>
            {{/dexterity}}
            {{#composure}}
                <span data-i18n="composure">Composure</span>({{composure}})<br>
            {{/composure}}
            {{#^rollTotal() fastReflexes 0}}
                <span data-i18n="fast-reflexes">Fast Reflexes</span>({{fastReflexes}})<br>
            {{/^rollTotal() fastReflexes 0}}
            {{#^rollTotal() initiativePenalty 0}}
                <span data-i18n="initiative">Initiative</span> <span data-i18n="penalty">Penalty</span>({{initiativePenalty}})<br>
            {{/^rollTotal() initiativePenalty 0}}
        </td></tr>
        <tr>
            <td class="result"><span data-i18n="initiative">Initiative</span> {{result}}</td>
        </tr>
        <tr>
            <td class="specialrollflag"></td>
        </tr>
    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-wod-attack">
    <table>
        <tr><th>{{name}} <span data-i18n="makes-a">makes a</span> {{attack_name}} <span data-i18n="attack">attack</span></th></tr>
        <tr><td class="attr">
            {{#str}}
                <span data-i18n="strength">Strength</span>({{strength}})<br>
            {{/str}}
            {{#dex}}
                <span data-i18n="dexterity">Dexterity</span>({{dexterity}})<br>
            {{/dex}}
            {{#bra}}
                <span data-i18n="brawl">Brawl</span>({{brawl}})<br>
            {{/bra}}
            {{#wea}}
                <span data-i18n="weaponry">Weaponry</span>({{weaponry}})<br>
            {{/wea}}
            {{#fir}}
                <span data-i18n="firearms">Firearms</span>({{firearms}})<br>
            {{/fir}}
            {{#ath}}
                <span data-i18n="athletics">Athletics</span>({{athletics}})<br>
            {{/ath}}
            {{#1st}}
                {{attack_name}}({{weapon_damage}})<br>
            {{/1st}}
            {{#^rollTotal() apen 0}}
                <span data-i18n="armor">Armor</span> <span data-i18n="penalty">Penalty</span>({{apen}})<br>
            {{/^rollTotal() apen 0}}
            {{#^rollTotal() wpen 0}}
                <span data-i18n="weapon">Weapon</span> <span data-i18n="penalty">Penalty</span>({{wpen}})<br>
            {{/^rollTotal() wpen 0}}
            {{#^rollTotal() woundpenalty 0}}
                <span data-i18n="wound">Wound</span> <span data-i18n="penalty">Penalty</span>({{woundpenalty}})
            {{/^rollTotal() woundpenalty 0}}
            {{#^rollTotal() mod 0}}
                <span data-i18n="modifiers">Modifiers</span>({{mod}})<br>
            {{/^rollTotal() mod 0}}
            {{#rollTotal() result 0}}
                <span data-i18n="and-misses-with">and misses with</span>...<br>
                <tr>
                    <td class="result hit">{{result}} <span data-i18n="successes">Successes</span></td>
                </tr>
            {{/rollTotal() result 0}}
            {{#rollGreater() result 0}}
                <span data-i18n="and-hits-for">and hits for</span><br>
                <tr>
                    <td class="result miss">{{result}}{{#2nd}} + {{weapon_damage}}{{/2nd}} <span data-i18n="damage">Damage</span></td>
                </tr>
            {{/rollGreater() result 0}}
        </td></tr>
        <tr>
            <td class="specialrollflag">
                {{#chance}}
                    0C
                {{/chance}}
                {{#9again}}
                    9A
                {{/9again}}
                {{#8again}}
                    8A
                {{/8again}}
            </td>
        </tr>
    </table>
</rolltemplate>
</div>

<script type="text/worker">
    var attributes = ["intelligence","wits","resolve","strength","dexterity","stamina","presence","manipulation","composure"];
    var skills = ["academics","computer","crafts","investigation","medicine","occult","politics","science","athletics","brawl","drive","firearms","larceny","stealth","survival","weaponry","animalken","empathy","expression","intimidation","persuasion","socialize","streetwise","subterfuge"];
    var normalStats = ["intelligence","wits","resolve","strength","dexterity","stamina","presence","manipulation","composure","academics","computer","crafts","investigation","medicine","occult","politics","science","athletics","brawl","drive","firearms","larceny","stealth","survival","weaponry","animalken","empathy","expression","intimidation","persuasion","socialize","streetwise","subterfuge"];
    var powers = ["animalism","auspex","celerity","dominate","majesty","nightmare","obfuscate","protean","resilience","vigor","crac","thebansorcery","death","fate","forces","life","matter","mind","prime","spirit","space","time"];
    var allStats = ["intelligence","wits","resolve","strength","dexterity","stamina","presence","manipulation","composure","academics","computer","crafts","investigation","medicine","occult","politics","science","athletics","brawl","drive","firearms","larceny","stealth","survival","weaponry","animalken","empathy","expression","intimidation","persuasion","socialize","streetwise","subterfuge","animalism","auspex","celerity","dominate","majesty","nightmare","obfuscate","protean","resilience","vigor","crac","thebansorcery","death","fate","forces","life","matter","mind","prime","spirit","space","time","potency"];
    var potencyNames = { mortal1:"", mortal2:"", vampire1:"Blood Potency", vampire2:"Blood Potency", werewolf1:"Primal Urge", werewolf2:"Primal Urge", mage1:"Gnosis", mage2:"Gnosis", promethean1:"Azoth", promethean2:"Azoth", changeling1:"Wyrd", changeling2:"Wyrd", demon:"Primum", beast:"Lair", hunter:"", geist1:"Psyche", mummy1:"Sekhem" };

    ["intelligence","wits","resolve","strength","dexterity","stamina","presence","manipulation","composure","academics","computer","crafts","investigation","occult","politics","science","athletics","brawl","drive","firearms","larceny","stealth","survival","weaponry","animalken","empathy","expression","intimidation","persuasion","socialize","streetwise","subterfuge","animalism","auspex","celerity","dominate","majesty","nightmare","obfuscate","protean","resilience","vigor","crac","thebansorcery","death","fate","forces","life","matter","mind","prime","spirit","space","time","potency","rolltype"].forEach((attr) => {
        on(`change:${attr} change:${attr}_flag`, (eventInfo) => {
            const source = eventInfo.sourceAttribute;
            const attribute = (attr.includes("flag")) ? attr.split(`_flag`)[0] : attr; //Remove the "_flag" part so we can pass the name

            updateRolls(`${attribute}`);
            console.log(source);

            if (source === "resolve_flag" || source === "composure_flag") {
                updateWillpower();
            };

            if (source === "wits" || source === "composure") {
                updateMoralHealth();
            };

            if (source === "wits" || source === "dexterity" || source === "athletics" || source === "brawl" || source === "weaponry") {
                getAttrs(["defense_select"], (v) => { // PRD-1407
                    updateDefense(v.defense_select);
                });
            };

            if (source === "stamina" || source === "resilience") {
                updateHealth();
            };
        });
    });

    [...Array(5).keys()].forEach((attr) => {
        on(`change:attack_type${attr}`, (eventInfo) => {//checks attack_type0 trough attack_type4
          const source = eventInfo.sourceAttribute;
          console.log(source);
          updateRolls("rolltype");
        });
    });

    on("change:attack", function() {
        updateRolls("rolltype");
        updateAttacks();
    });

    ["_initiative0","_initiative1","_initiative2","_initiative3","_initiative4","_strength0","_strength1","_strength2","_strength3","_strength4"].forEach((attr) => {
      on(`change:attack${attr}`, (eventInfo) => {
          updateAttacks();
      });
    });

    ["","_flag0","_flag1","_flag2","_strength0","_strength1","_strength2"].forEach((attr) => {
      on(`change:armor${attr}`, (eventInfo) => {
          updateAttacks();
      });
    });

    on("change:health", function() {
        updateAttacks();
    });

    [...Array(16).keys()].forEach((attr) => {//healthbox nr. 1 through 16
        on(`change:healthbox_${attr+1}`, (eventInfo) => {
          const source = eventInfo.sourceAttribute;
          console.log(source);
          updateAttacks();
        });
    });

    on("change:base_size change:giant change:small_framed change:bonus_health", function() {
        updateHealth();
    });

    on("change:sheettype", function() {
        updateHealth();
        updateDefaultDefense();
        updatePotencyName();
        updateRollType();
    });

    on("change:bonus_willpower", function() {
        updateWillpower();
    });

    on("change:bonus_moralhealth", function() {
        updateMoralHealth();
    });

    on("change:defense_select", function(eventInfo) {
        updateDefense(eventInfo.newValue);
    });

    on("change:iron_stamina", function() {
        updateWoundPenalties();
    });

    on("change:rolltype_select", function() {
        updateRollType();
    });

    on("sheet:opened", function() {
        updateDefaultDefense();
        updatePotencyName();
        updateRollType();
    });
// ---------------------------------- Translation functions ------------------------------------------
    on("sheet:opened", function(){
        setAttrs({
            dicepoolmacro: getTranslationByKey("dice-pool"),
            modifiermacro: getTranslationByKey("modifiers"),
            unarmedmacro: getTranslationByKey("unarmed")
        });
    });

// --------------------------------------------------------------------------------------------------
    var updateRolls = function(stat) {
        var type;
        var stat_flag = stat + "_flag";
        var rarray = [];
        getAttrs(["attack","rollstyle","roll_array","attack_type0","attack_type1","attack_type2","attack_type3","attack_type4","intelligence_flag","wits_flag","resolve_flag","strength_flag","dexterity_flag","stamina_flag","presence_flag","manipulation_flag","composure_flag","academics_flag","computer_flag","crafts_flag","investigation_flag","medicine_flag","occult_flag","politics_flag","science_flag","athletics_flag","brawl_flag","drive_flag","firearms_flag","larceny_flag","stealth_flag","survival_flag","weaponry_flag","animalken_flag","empathy_flag","expression_flag","intimidation_flag","persuasion_flag","socialize_flag","streetwise_flag","subterfuge_flag","intelligence","wits","resolve","strength","dexterity","stamina","presence","manipulation","composure","academics","computer","crafts","investigation","medicine","occult","politics","science","athletics","brawl","drive","firearms","larceny","stealth","survival","weaponry","animalken","empathy","expression","intimidation","persuasion","socialize","streetwise","subterfuge","animalism","animalism_flag","auspex","auspex_flag","celerity","celerity_flag","dominate","dominate_flag","majesty","majesty_flag","nightmare","nightmare_flag","obfuscate","obfuscate_flag","protean","protean_flag","resilience","resilience_flag","vigor","vigor_flag","crac","crac_flag","thebansorcery","thebansorcery_flag","death","death_flag","fate","fate_flag","forces","forces_flag","life","life_flag","matter","matter_flag","mind","mind_flag","prime","prime_flag","spirit","spirit_flag","space","space_flag","time","time_flag","potency","potency_flag","potency_name"], function(v) {
            allStats.forEach(function(x) {
                var flagname = x + "_flag";
                if(parseInt(v[flagname], 10) != 0) {
                    rarray.push(x);
                }
            });
            var prev_rarray = v.roll_array && v.roll_array != "" ? v.roll_array.split(",") : [];
            if(stat != "rolltype") {
                if(parseInt(v[stat_flag], 10) === 0) {
                    if(rarray.indexOf(stat) > -1) {
                        rarray.splice(rarray.indexOf(stat), 1);
                    }
                }
                else if (stat != "potency") {
                    if(attributes.indexOf(stat) > -1) {
                        type = "attribute";
                    }
                    else if(skills.indexOf(stat) > -1) {
                        type = "skill";
                    }
                    else {
                        type = "power";
                    }
                    if(type === "attribute") {
                        if(rarray.filter(function(x){return attributes.indexOf(x) > -1}).length > 1) {
                            rarray = [stat, prev_rarray.filter(function(x){return attributes.indexOf(x) > -1})[0]];
                        }
                    }
                    if(type === "skill") {
                       const attrFilter = rarray.filter(function(x){return attributes.indexOf(x) > -1}),
                           skillFilter = rarray.filter(function(x){return skills.indexOf(x) > -1});
                       if(attrFilter.length < 2 && skillFilter.length === 0) {
                           rarray.unshift(stat);
                       }else if(attrFilter.length < 2 && skillFilter.length > 0) {
                           rarray = rarray.filter(function(x) {return skills.indexOf(x) < 0;});
                           rarray.unshift(stat);
                       }else if(attrFilter.length > 1) {
                           rarray = [stat, prev_rarray.filter(function(x){return attributes.indexOf(x) > -1})[0]];//This could probably be done with .shift instead of the filter, but I don't know what's going on the grand scheme of things so...
                       }
                    }
                    if(type === "power") {
                        if(rarray.filter(function(x){return normalStats.indexOf(x) === -1}).length > 0) {
                            rarray = rarray.filter(function(x){return normalStats.indexOf(x) > -1});
                            rarray.unshift(stat);
                        }
                        else {
                            rarray.unshift(stat);
                        }
                    }
                }
                if(rarray.length > 3) {
                    rarray.length = 3;
                }
                var cleanup = {};
                var diff = prev_rarray.filter(function(x) {return rarray.indexOf(x) < 0});
                diff.forEach(function(x) {
                    var flagname = x + "_flag";
                    cleanup[flagname] = 0;
                });
                setAttrs(cleanup);
            }
            var final = parseInt(v[stat_flag], 10) === 0 || type === "rolltype" ? prev_rarray.join(",") : rarray.join(",");
            var order = [];
            rarray.filter(function(x){return attributes.indexOf(x) > -1}).forEach(function(x) {order.push(x);});
            rarray.filter(function(x){return skills.indexOf(x) > -1}).forEach(function(x) {order.push(x);});
            if (rarray.indexOf("potency") > -1) {order.push("potency");}
            rarray.filter(function(x){return normalStats.indexOf(x) === -1 && x != "potency"}).forEach(function(x) {order.push(x);});

            var names = order.map(function(x) {
               let transX = getTranslationByKey(x);
               if (x == "potency"){
                   return v.potency_name;//may need to do getTranslationgByKey here as well, but not sure what the potential values of this are, and if they are user defined or sheet defined
               }
               return transX.charAt(0).toUpperCase() + transX.slice(1);//note I actually prefer to do this using .replace if there's going to be a chance for multi word casing
            });

            var base = "&{template:wod-simple} {{name=@{character_name}}} {{option=?{@{dicepoolmacro}|0}}} {{result=[[{(?{@{dicepoolmacro}|1}@{rolltype}";
            if(order.length > 0) {
                base = "&{template:wod-3part} {{name=@{character_name}}} {{mod=[[?{@{modifiermacro}|0}]]}} {{woundpenalty=[[@{wound_penalty}]]}} {{part1=" + names[0] + "}} {{part1pool=" + v[order[0]] + "}}";
                var result = " {{result=[[{((?{@{modifiermacro}|0}+@{wound_penalty}+" + v[order[0]];
                if(order.length > 1) {
                    base = base + " {{part2=" + names[1] + "}} {{part2pool=" + v[order[1]] + "}}";
                    result = result + "+" + v[order[1]];
                }
                if(order.length > 2) {
                    base = base + " {{part3=" + names[2] + "}} {{part3pool=" + v[order[2]] + "}}";
                    result = result + "+" + v[order[2]];
                }
                base = base + result + ")@{rolltype}"
            }
            var display = "";
            if(v.rollstyle === "@{roll_base}") {
                if(order.length === 0) {
                    display = `${display}${getTranslationByKey("simple-roll")}\n`
                }
                else {
                    //display = order.join(" +\n");
                    //display = display.replace(/\b./g, function(x){ return x.toUpperCase(); });
                    display = names.join(" +\n");
                }
            }
            else if(v.rollstyle === "@{rollattack}") {
                var regex = /attack_type(.)/;
                var attack_type = "attack_type" + v.attack.match(regex)[1];
                if(v[attack_type].indexOf("str=1") > -1) {
                    display = `${display}${getTranslationByKey("strength")}\n`
                }
                if(v[attack_type].indexOf("dex=1") > -1) {
                    display = `${display}${getTranslationByKey("dexterity")}\n`
                }
                if(v[attack_type].indexOf("bra=1") > -1) {
                    display = `${display}${getTranslationByKey("brawl")}\n`
                }
                if(v[attack_type].indexOf("wea=1") > -1) {
                    display = `${display}${getTranslationByKey("weaponry")}\n`
                }
                if(v[attack_type].indexOf("fir=1") > -1) {
                    display = `${display}${getTranslationByKey("firearms")}\n`
                }
                if(v[attack_type].indexOf("ath=1") > -1) {
                    display = `${display}${getTranslationByKey("athletics")}\n`
                }
            }
            else if(v.rollstyle === "@{rollsimple}") {
                display = `${display}${getTranslationByKey("simple-roll")}\n`
            }

            setAttrs({
                roll_array: final,
                roll_base: base,
                rolldisplay: display
            });
        });
    };

    var updateHealth = function() {
        getAttrs(["stamina","base_size","giant","small_framed","sheettype","resilience","bonus_health"], function(v) {
            var health = parseInt(v.stamina, 10) + parseInt(v.base_size, 10) + parseInt(v.giant, 10) + parseInt(v.small_framed, 10) + parseInt(v.bonus_health, 10);
            if(v.sheettype.indexOf("vampire2")) {
                health = health + parseInt(v.resilience, 10);
            }
            setAttrs({
                health: health
            });
        });
    }

    var updateWillpower = function() {
        getAttrs(["resolve","composure","bonus_willpower"], function(v) {
            var willpower = parseInt(v.resolve, 10) + parseInt(v.composure, 10) + parseInt(v.bonus_willpower, 10);
            setAttrs({
                willpower: willpower
            });
        });
    };

    var updateMoralHealth = function() {
        getAttrs(["wits","composure","bonus_moralhealth","sheettype"], function(v) {
            if (v.sheettype == "changeling2"){
                var moralhealth = parseInt(v.wits, 10) + parseInt(v.composure, 10) + parseInt(v.bonus_moralhealth);
                setAttrs({
                    moralhealth: moralhealth
                });
            }
        });
    }

    var updateAttacks = function() {
        getAttrs(["strength","attack","iron_stamina","attack_initiative0","attack_initiative1","attack_initiative2","attack_initiative3","attack_initiative4","attack_strength0","attack_strength1","attack_strength2","attack_strength3","attack_strength4","armor_flag0","armor_flag1","armor_flag2","armor_strength0","armor_strength1","armor_strength2","health","healthbox_1","healthbox_2","healthbox_3","healthbox_4","healthbox_5","healthbox_6","healthbox_7","healthbox_8","healthbox_9","healthbox_10","healthbox_11","healthbox_12","healthbox_13","healthbox_14","healthbox_15","healthbox_16"], function(v) {
            var str = parseInt(v.strength, 10);
            var regex = /attack_type(.)/;
            var atknum = v.attack.match(regex)[1];
            var init = isNaN(v["attack_initiative" + atknum]) === false && v["attack_initiative" + atknum] != "" ? v["attack_initiative" + atknum] : 0;
            var wpen = str < v["attack_strength" + atknum] ? str - v["attack_strength" + atknum] : 0;
            var apen = 0;
            if(v.armor_flag0 != 0 && str < parseInt(v.armor_strength0)) {apen = apen + (str - parseInt(v.armor_strength0));};
            if(v.armor_flag1 != 0 && str < parseInt(v.armor_strength1)) {apen = apen + (str - parseInt(v.armor_strength1));};
            if(v.armor_flag2 != 0 && str < parseInt(v.armor_strength2)) {apen = apen + (str - parseInt(v.armor_strength2));};
            var wound_penalty = 0;
            var ironStamina = parseInt(v.iron_stamina, 10);
            if(v["healthbox_" + v.health] != 0) {
                wound_penalty = -3 + Math.min(ironStamina, 3);
            }
            else if(v["healthbox_" + (v.health - 1)] != 0) {
                wound_penalty = -2 + Math.min(ironStamina, 2);
            }
            else if(v["healthbox_" + (v.health - 2)] != 0) {
                wound_penalty = -1 + Math.min(ironStamina, 1);
            }
            setAttrs({
                weapon_penalty: wpen,
                armor_penalty: apen,
                initiative_penalty: init,
                wound_penalty: wound_penalty
            });
        });
    }

    var updateDefense = function(defense_type = "lowest") {
        getAttrs(["athletics","brawl","dexterity","weaponry","wits"], function(v) {
            var athletics = (parseInt(v.athletics, 10) || 0);
            var brawl = (parseInt(v.brawl, 10) || 10); // PRD-1407
            var dexterity = (parseInt(v.dexterity, 10) || 0);
            var weaponry = (parseInt(v.weaponry, 10) || 10); // PRD-1407
            var wits = (parseInt(v.wits, 10) || 10);
            var defense;
            switch (defense_type) {
                case "lowest":
                    defense = Math.min(dexterity, wits);
                    break;
                case "highest":
                    defense = Math.max(dexterity, wits);
                    break;
                case "wits":
                    defense = wits;
                    break;
                case "dexterity":
                    defense = dexterity;
                    break;
                case "lowest_plus_athletics":
                    defense = Math.min(dexterity, wits) + athletics;
                    break;
                case "lowest_plus_brawl":
                    defense = Math.min(dexterity, wits) + brawl;
                    break;
                case "lowest_plus_weaponry":
                    defense = Math.min(dexterity, wits) + weaponry;
                    break;
            }
            setAttrs({defense_base: defense});
        });
    }

    var updateDefaultDefense = function() {
        getAttrs(["sheettype"], function(v) {
            var defense;
            if (v.sheettype === "mortal2" ||
                v.sheettype === "vampire2" ||
                v.sheettype === "werewolf2" ||
                v.sheettype === "mage2" ||
                v.sheettype === "promethean2" ||
                v.sheettype === "changeling2" ||
                v.sheettype === "demon" ||
                v.sheettype === "beast") {
                defense = "lowest_plus_athletics";
            }
            else {
                defense = "lowest";
            }
            setAttrs({defense_select: defense});
        });
    }

    var updateWoundPenalties = function() {
        getAttrs(["iron_stamina"], function(v) {
            var ironStamina = parseInt(v.iron_stamina, 10);
            var woundpenalties = '-1-2-3';
            const setWound = {};
            if (ironStamina >= 3) {
                woundpenalties = '';
            }
            else if (ironStamina === 2) {
                woundpenalties = '-1';
            }
            else if (ironStamina === 1) {
                woundpenalties = '-1-2';
            }
            [...Array(16).keys()].forEach(num => {
              setWound[`woundpenalties_${num+1}`]= woundpenalties;
            });
            setAttrs(setWound);
        });
    }

    var updatePotencyName = function() {
        getAttrs(["sheettype"], function(v){
            setAttrs({
                potency_name: potencyNames[v.sheettype]
            });
        });
    }

    var updateRollType = function() {
        getAttrs(["rolltype_select","sheettype","attack_type0","attack_type1","attack_type2","attack_type3","attack_type4"], function(v) {
            var update = {};
            var isSecondEdition = v.sheettype === "mortal2" ||
                v.sheettype === "vampire2" ||
                v.sheettype === "werewolf2" ||
                v.sheettype === "mage2" ||
                v.sheettype === "promethean2" ||
                v.sheettype === "changeling2" ||
                v.sheettype === "demon" ||
                v.sheettype === "beast";
            var value;
            switch (v.rolltype_select) {
                case "Chance":
                    if (isSecondEdition) {
                        value = "*0+1)d10cf<1}>10]]}} {{chance=1}}";
                    }
                    else {
                        value = "*0+1)d10!cf<1}>10]]}} {{chance=1}}";
                    }
                    break;
                case "Normal":
                    value = ")d10!cs>10}>8]]}}";
                    break;
                case "9-Again":
                    value = ")d10!>9cs>9}>8]]}} {{9again=1}}";
                    break;
                case "8-Again":
                    value = ")d10!>8cs>8}>8]]}} {{8again=1}}";
                    break;
                case "Don't Reroll 10s":
                    value = ")d10cs>10}>8]]}}";
                    break;
                case "Rote":
                    value = ")d10ro<7}>8]]}}";
                    break;
                case "Chance Rote":
                    if (isSecondEdition) {
                        value = "*0+1)d10ro<7cf<1}>10]]}} {{chance=1}}";
                    }
                    else {
                        value = "*0+1)d10!ro<7cf<1}>10]]}} {{chance=1}}";
                    }
                    break;
            }
            update["rolltype"] = value;
            // (PRD-1406) Check that attack type is correlated to edition
            for(var i = 0; i < 5; i++) {
                if(isSecondEdition) {
                    switch(v[`attack_type${i}`]) {
                        // Melee
                        case "{{1st=1}} {{str=1}} {{wea=1}} {{result=[[{((@{attack_damage${i}}+@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{2nd=1}} {{str=1}} {{wea=1}} {{result=[[{((@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                        // Gun
                        case "{{1st=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{attack_damage${i}}+@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{2nd=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                        // Thrown
                        case "{{1st=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{2nd=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                        // Brawl* (Fighting Finesse)
                        case "{{1st=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{2nd=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                        // Melee* (Fighting Finesse)
                        case "{{1st=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{2nd=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                    }
                } else {
                    switch(v[`attack_type${i}`]) {
                        // Melee
                        case "{{2nd=1}} {{str=1}} {{wea=1}} {{result=[[{((@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{1st=1}} {{str=1}} {{wea=1}} {{result=[[{((@{attack_damage${i}}+@{strength}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                        // Gun
                        case "{{2nd=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{1st=1}} {{dex=1}} {{fir=1}} {{result=[[{((@{attack_damage${i}}+@{dexterity}+@{firearms}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                        // Thrown
                        case "{{2nd=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{1st=1}} {{dex=1}} {{ath=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{athletics}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                        // Brawl* (Fighting Finesse)
                        case "{{2nd=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{1st=1}} {{dex=1}} {{bra=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{brawl}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                        // Melee* (Fighting Finesse)
                        case "{{2nd=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})":
                            update[`attack_type${i}`] = "{{1st=1}} {{dex=1}} {{wea=1}} {{result=[[{((@{attack_damage1}+@{dexterity}+@{weaponry}+?{@{modifiermacro}|0}+@{wound_penalty}+@{weapon_penalty}+@{armor_penalty})";
                            break;
                    }
                }
            }
            setAttrs(update, {silent: true});
        });
    }

</script>
